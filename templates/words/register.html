{% extends 'base/base.html' %}

{% block title %}
    Registro de proyecto
{% endblock %}



{% block content %}
    <div class="px-2">
        <form action="" method="GET" id="filter" class="row">
            <div class="my-2">
                <input type="text" placeholder="Word">

                <div>
                    <label for="wordTypesSelect">Select word types:</label>
                    <select id="wordTypesSelect" required data-api-endpoint="{{ url_for('list-words-types') }}">
                        <option value="" selected disabled>Select a word type</option>
                    </select>
                </div>
                <div>
                    <label for="verbalTense">Select verbal tense:</label>
                    <select id="verbalTense" required data-api-endpoint="{{ url_for('list-verbal-tenses') }}">
                        <option value="" selected disabled>Select a verbal tense</option>
                    </select>
                </div>
            </div>
            <div class="col-2 text-left">
                <button type="submit" class="btn btn-info me-3">Register</button>
            </div>
        </form>
    </div>




{% endblock %}

{% block javascript %}
    {{ super() }}

    <script>
        async function getOptionElements(idApiEndPointElement, idSelectElement, dataEndPoint) {
            try {
                // Construir manualmente la URL de la API
                const apiEndpoint = document.getElementById(idApiEndPointElement).getAttribute(dataEndPoint)
                const response = await fetch(apiEndpoint);
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const wordTypes = await response.json();

                // Obtener el elemento select
                const selectElement = document.getElementById(idSelectElement);


                // Agregar una opción por cada tipo de palabra
                wordTypes.forEach(wordType => {
                    const option = document.createElement('option');
                    option.value = wordType.id;
                    option.text = wordType.value;
                    selectElement.add(option);
                });

                // Aquí puedes manejar la respuesta, por ejemplo, actualizar el DOM con los datos
            } catch (error) {
                console.error('Error:', error.message);
            }
        }
        getOptionElements('wordTypesSelect', 'wordTypesSelect', 'data-api-endpoint')
        getOptionElements('verbalTense', 'verbalTense', 'data-api-endpoint')

    </script>
{% endblock %}